<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Minix RTSP client & audio merge</title>
        <link rel="stylesheet" href="resources/bootstrap-5.1.3-dist/css/bootstrap.css">
        <script src="resources/bootstrap-5.1.3-dist/js/bootstrap.js"></script>
        <script src="resources/js/jquery-3.6.0.js"></script>
    </head>
    <body>
        <div class="container">
            <h1>Minix RTSP client & audio merge configuration</h1>
            <ul class="nav nav-tabs" id="tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="device-tab" data-bs-toggle="tab" data-bs-target="#device" type="button" role="tab" aria-controls="home" aria-selected="true">Device</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="input-tab" data-bs-toggle="tab" data-bs-target="#input" type="button" role="tab" aria-controls="profile" aria-selected="false">Audio repeater</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="output-tab" data-bs-toggle="tab" data-bs-target="#output" type="button" role="tab" aria-controls="contact" aria-selected="false">RTSP Client</button>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade show active" id="device" role="tabpanel" aria-labelledby="device-tab">
                    <br>
                    <h4>Uptime</h4>
                    <p id="uptime">Not responding</p>
                    <br>
                    <h4>Reboot</h4>
                    <button class="btn btn-danger" id="reboot">Reboot</button>
                    <br>
                    <br>
                    <h4>Console</h4>
                    <style>
                        #console {
                            height: 20em;
                            overflow: scroll;
                        }
                        #console > p {
                            margin-bottom: 0;
                        }
                    </style>
                    <div class="border" id="console">
                        <p>Update in 5 seconds</p>
                    </div>
                </div>
                <div class="tab-pane fade" id="input" role="tabpanel" aria-labelledby="input-tab">
                    <br>
                    <h4>Audio input device</h4>
                    <select id="audioInput">
                        <!-- automatically populated -->
                    </select>
                    <br>
                    <br>
                    <h4>Audio output device</h4>
                    <select id="audioOutput">
                        <!-- automatically populated -->
                    </select>
                    <br>
                    <br>
                    <br>
                    <button class="btn btn-primary" id="restartAudio">Save and reload audio</button>
                    <p id="audioState">State: unknown</p>
                </div>
                <div class="tab-pane fade" id="output" role="tabpanel" aria-labelledby="output-tab">
                    <br>
                    <h4>Camera IP</h4>
                    <input type="text" id="cameraIp" placeholder="0.0.0.0:554" value="192.168.0.10:554">
                    <p>Discovered camera's:</p>
                    <p>TODO: ICMP ping the subnet in another thread and check if its a camera with http info request</p>
                    <br>
                    <br>
                    <h4>Setup commands</h4>
                    <label style="width: 100%; height: 10em">
                        One setting request per line, comment lines denoted with '>'.
                        <textarea id="setupCommands" style="width: 100%; height: 100%">
> should set resolution to 1080p59.94 (10h) or 1080p29.97 (14h)
http://%ip%/cgi-bin/aw_cam?cmd=OSA:87:10h&res=1
</textarea>
                    </label>
                    <br>
                    <br>
                    <h4>RTSP stream url</h4>
                    <input type="text" id="streamUrl" name="rtsp_url" placeholder="RTSP url" style="width: 100%" value="rtsp://%ip%/mediainput/h264/stream_1">
                    <br>
                    <br>
                    <br>
                    <button class="btn btn-primary" id="restartVideo">Save and reload video</button>
                    <p id="videoState">State: unknown</p>
                </div>
            </div>
        </div>
        <script src="resources/js/endpoints.js"></script>
    </body>
</html>
