<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Minix RTSP client & audio merge</title>
        <link rel="stylesheet" href="resources/bootstrap-5.1.3-dist/css/bootstrap.css">
        <script src="resources/bootstrap-5.1.3-dist/js/bootstrap.js"></script>
        <script src="resources/js/jquery-3.6.0.js"></script>
    </head>
    <body>
        <div class="container">
            <h1>Minix RTSP client & audio merge configuration</h1>
            <ul class="nav nav-tabs" id="tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="device-tab" data-bs-toggle="tab" data-bs-target="#device" type="button" role="tab" aria-controls="home" aria-selected="true">Device</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="input-tab" data-bs-toggle="tab" data-bs-target="#input" type="button" role="tab" aria-controls="profile" aria-selected="false">Audio repeater</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="output-tab" data-bs-toggle="tab" data-bs-target="#output" type="button" role="tab" aria-controls="contact" aria-selected="false">RTSP Client</button>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade show active" id="device" role="tabpanel" aria-labelledby="device-tab">
                    <br>
                    <h4>Uptime</h4>
                    <p id="uptime">Not responding</p>
                    <br>
                    <h4>Reboot</h4>
                    <button class="btn btn-danger" id="reboot">Reboot</button>
                    <br>
                    <br>
                    <h4>Web console <small>(non native logs)</small></h4>
                    <style>
                        #console {
                            height: 20em;
                            overflow: scroll;
                        }
                        #console > p {
                            margin-bottom: 0;
                        }
                    </style>
                    <div class="border" id="console">
                        <p>Update in 5 seconds</p>
                    </div>
                </div>
                <div class="tab-pane fade" id="input" role="tabpanel" aria-labelledby="input-tab">
                    <br>
                    <h4>Audio input device</h4>
                    <!-- TODO: Does not display currently selected but not connected adapters -->
                    <select id="audioInput">
                        <!-- automatically populated -->
                    </select>
                    <br>
                    <br>
                    <h4>Audio output device</h4>
                    <select id="audioOutput">
                        <!-- automatically populated -->
                    </select>
                    <br>
                    <br>
                    <h4>Repeater buffer size</h4>
                    <label for="audioBuffer">Multiple of 4 required</label>
                    <br>
                    <input type="number" id="audioBuffer" placeholder="2048">
                    <br>
                    <br>
                    <br>
                    <button class="btn btn-primary" id="restartAudio">Save and reload audio</button>
                    <p id="audioState">State: unknown</p>
                </div>
                <div class="tab-pane fade" id="output" role="tabpanel" aria-labelledby="output-tab">
                    <br>
                    <h4>Camera IP</h4>
                    <input type="text" id="cameraIp" placeholder="0.0.0.0:554">
                    <br>
                    <br>
                    <h4>Stream options</h4>
                    <label style="width: 100%; height: 10em;">
                        One option per line.
                        <textarea id="streamOptions" style="width: 100%; height: 100%"></textarea>
                    </label>
                    <br>
                    <br>
                    <h4>RTSP stream url</h4>
                    <input type="text" id="streamUrl" name="rtsp_url" placeholder="RTSP url" style="width: 100%">
                    <br>
                    <br>
                    <br>
                    <button class="btn btn-primary" id="restartVideo">Save and reload video</button>
                    <p id="videoState">State: unknown</p>
                </div>
            </div>
        </div>
        <script src="resources/js/endpoints.js"></script>
    </body>
</html>
